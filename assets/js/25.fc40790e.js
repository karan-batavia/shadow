(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{306:function(t,a,n){"use strict";n.r(a);var s=n(14),e=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"integrating-with-application-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#integrating-with-application-plugin"}},[t._v("#")]),t._v(" Integrating with Application Plugin")]),t._v(" "),a("p",[t._v("Shadow reacts to the presence of Gradle's\n"),a("a",{attrs:{href:"https://docs.gradle.org/current/userguide/application_plugin.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("application")]),a("OutboundLink")],1),t._v(" plugin and will automatically\nconfigure additional tasks for running the shadowed JAR and creating distributions containing the shadowed JAR.")]),t._v(" "),a("p",[t._v("Just like the normal "),a("code",[t._v("jar")]),t._v(" task, when the "),a("code",[t._v("application")]),t._v(" plugin is applied, the "),a("code",[t._v("shadowJar")]),t._v(" manifest will be\nconfigured to contain the "),a("code",[t._v("Main-Class")]),t._v(" attribute with the value specified in the project's "),a("code",[t._v("mainClassName")]),t._v(" attribute.")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Using Shadow with Application Plugin")]),t._v("\nplugins "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.gradleup.shadow'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\napplication "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mainClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myapp.Main'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"running-the-shadow-jar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-the-shadow-jar"}},[t._v("#")]),t._v(" Running the Shadow JAR")]),t._v(" "),a("p",[t._v("When applied along with the "),a("code",[t._v("application")]),t._v(" plugin, the "),a("code",[t._v("runShadow")]),t._v(" task will be created for starting\nthe application from the shadowed JAR.\nThe "),a("code",[t._v("runShadow")]),t._v(" task is a "),a("a",{attrs:{href:"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("JavaExec")]),a("OutboundLink")],1),t._v("\ntask that is configured to execute "),a("code",[t._v("java -jar myproject-all.jar")]),t._v(".\nIt can be configured the same as any other "),a("code",[t._v("JavaExec")]),t._v(" task.")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Configuring the runShadow Task")]),t._v("\nplugins "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.gradleup.shadow'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\napplication "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mainClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myapp.Main'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ntasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("named")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'runShadow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JavaExec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  args "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"distributing-the-shadow-jar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#distributing-the-shadow-jar"}},[t._v("#")]),t._v(" Distributing the Shadow JAR")]),t._v(" "),a("p",[t._v("The Shadow plugin will also configure distribution tasks when in the presence of the "),a("code",[t._v("application")]),t._v(" plugin.\nThe plugin will create "),a("code",[t._v("shadowDistZip")]),t._v(" and "),a("code",[t._v("shadowDistTar")]),t._v(" which creates Zip and Tar distributions\nrespectively.\nEach distribution will contain the shadowed JAR file along with the necessary start scripts to launch\nthe application.")]),t._v(" "),a("p",[t._v("Additionally, the plugin will create the "),a("code",[t._v("installShadowDist")]),t._v(" and "),a("code",[t._v("startShadowScripts")]),t._v(" tasks which stages the necessary\nfiles for a distribution to "),a("code",[t._v("build/install/<project name>-shadow/")]),t._v(".")]),t._v(" "),a("p",[t._v("You can also add more files into the distribution like:")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Add extra files to the distribution")]),t._v("\nplugins "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application'")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.gradleup.shadow'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\napplication "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mainClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myapp.Main'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Optionally, you can add default JVM arguments to the start scripts like this:")]),t._v("\n  applicationDefaultJvmArgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--add-opens=java.base/java.lang=ALL-UNNAMED'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `shadow` is the name of the distribution created by Shadow plugin")]),t._v("\ndistributions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("named")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'shadow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("into")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extra'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    from project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extra/echo.sh'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("View "),a("a",{attrs:{href:"https://docs.gradle.org/current/userguide/distribution_plugin.html#distribution_plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("the official doc described"),a("OutboundLink")],1),t._v("\nfor more information about configuring distributions.")])])}),[],!1,null,null,null);a.default=e.exports}}]);